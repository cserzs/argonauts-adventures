<!DOCTYPE html>
<html ng-app="EuropeGame">
<head>
    <meta charset="UTF-8">
    <title>Argonauts Adventures</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/loader_spinner.css">
    <link rel="stylesheet" href="css/stilusok.css">
    <script src="lib/random-0.26.js"></script>
</head>
<body ng-controller="GameController">

<div class="loading-screen" ng-hide="isLoaded">
    <div ng-hide="isError">
        <div class="lds-dual-ring"></div>
        <div>Loading...</div>
    </div>
    <div ng-show="isError">Error loading!<br/>{{errorMessage}}</div>
</div>

<div ng-cloak>

<div ng-if="Gamestate.menuscreen" ng-controller="MenuScreenController" class="menu-panel panel">
    <h1 class="text-center">Argonauts' Adventures</h1>
    <div class="text-center">
        <img src="img/scenes-from-the-story-of-the-argonauts-bb7776.jpg" width="1024" height="411" title="Story of the Argonauts, The Metropolitan Museum of Art" />
    </div>
    <div class="flex-container menubar">
        <button ng-click="startNewGame()">New Game</button>
        <button ng-click="continueGame()" ng-show="canContinue">Continue Game</button>
    </div>
    
    <div>
        This is an adaptation of the board game "<a href="https://www.boardgamegeek.com/boardgame/128568/your-name-here-and-argonauts">(Your name here) and the argonauts</a>".<br/>
        <br/>
        You and your crew are the argonauts, who were the group of heroes in the ancient greek mythology.
        Your goal is to gain glory and your name remain in history forever.<br/>
        <br/>
        <p><b>Gameplay</b></p>
        It's basically a dice game. You got a dice (6 sided) and 12 brave soldiers.<br/>
        <br/>
        There is an adventure deck which contain monster and treasure cards. These represent the adventure of the argonauts.<br/>
        Your goal is to survive the adventure and return to Iolcus (the home city of the argonauts). 
        To claim this you have to traverse the adventure deck and have at least one soldier remaining.<br/>
        <br/>
        The game consist of turns.<br/>
        At the beginning of each turn you draw 3 cards.<br/>
        Each card has a difficulty. To defeat (or gain) the card you have to have greater or equal attack value than
        the card's difficulty.<br/>
        The attack value generated by the sum of the dice roll and the number of the assigned soldiers.<br/>
        If your attack value is less, you suffer damage. The damage substracted from your soldiers.<br/>
        If all soldiers are wounded, the quest is failed.<br/>
        If you win a quest you gain a heroic deed.<br/>
        If you gather at least 18 heroic deeds, you win the game.
        <p>Some useful tips</p>
        <ul>
            <li>The treasure cards will help you on the journey.</li>
            <li>The blessing cards are neutral.</li>
            <li>Roll of 6 is always win.</li>
            <li>If you win a quest, the defeated cards will be level up.</li>
            <li>Ignored cards counts discarded.</li>
            <li>If you no assign soldier to a card, it will be failed (regardless of roll or bonuses).</li>
            <li>Heroic deeds can be spend to advantages.</li>
        </ul>
        
        <div><b>Modified</b></div>
        <ul>
            <li>Soldiers instead of crew.</li>
        </ul>

        <h3>Credits</h3>
        Board game design and gameplay by Mike Arlington<br/>
        Programmed by Zsolt Csernai<br/>
        <br>
        Pictures from: <br/>
        Created with AngularJs.<br/>
        <br/>
        <a href="https://github.com/cserzs/argonauts-adventures">Source at GitHub</a>
    </div>
</div>

<div ng-if="Gamestate.main" ng-controller="MainController" class="main-panel panel">
    <h2 class="text-center">Iolcus</h2>
    <div class="flex-container stat-row">
        <div class="flex-box stat-box"><img class="text-middle" src="img/pile_victory.png" width="48" height="48" title="Number of success quests"/><span class="image-number">{{successQuests}}</span></div>
        <div class="flex-box stat-box"><img class="text-middle" src="img/pile_discard.png" width="48" height="48" title="Number of failed quests" /><span class="image-number">{{failedQuests}}</span></div>
        <div class="flex-box stat-box"><img class="text-middle" src="img/soldier.png" width="48" height="48" title="Number of soldiers" /><span class="image-number">{{soldiers}}</span></div>
        <div class="flex-box stat-box"><img class="text-middle" src="img/star_filled.png" width="48" height="48" title="Gathered heroic deeds" /><span class="image-number">{{gatheredHeroicDeeds}} / {{xp}}</span></div>
    </div>
    <div class="flex-container">
        <button class="flex-box" ng-click="startQuest()">Start Quest</button>
        <button class="flex-box" ng-click="showHeroicDeeds()">Show Heroic Deeds</button>
    </div>        
    <div class="flex-container end-row">
        <button class="flex-box" ng-click="home()">Home</button><br/>
    </div>
</div>

<div ng-if="Gamestate.heroicdeeds" ng-controller="HeroicDeedsController" class="heroic-panel panel">
    <h2>Heroic Deeds</h2>
    <div class="heroicdeed-desc">You can spend {{xp}} point.</div>
    <div ng-repeat="hd in heroicdeeds" class="heroicdeed-container">
            <div class="heroicdeed-star">
                <span ng-repeat="n in [].constructor(hd.cost) track by $index">
                    <img ng-click="addXp(hd)" ng-src="img/star_{{($index < hd.xp ? 'filled': 'empty')}}.png" width="28" height="28" />
                </span>
            </div>
            <div class="heroicdeed-text">
                <div><b>{{hd.name}}</b></div>
                <div ng-show="hd.desc">{{hd.desc}}</div>                    
            </div>
    </div>
    <div class="end-row">
        <button ng-click="back()">Back</button>
    </div>
</div>

<div ng-if="Gamestate.quest" ng-controller="QuestController" class="quest-panel panel">
    <h2 class="text-center">The Quest</h2>
    <div>
        <ul class="infobar">
            <li class="infobar-nav-item"><img src="img/soldier.png" class="infobar-img" width="48" height="48" title="Soldiers" /><span class="image-number">{{Game.soldiers}}</span></li>
            <li class="infobar-nav-item"><img src="img/soldier_occupied.png" class="infobar-img" width="48" height="48" title="Occupied soldiers" /><span class="image-number">{{Game.usedSoldiers}}</span></li>
            <li class="infobar-nav-item"><img src="img/soldier_wounded.png" class="infobar-img" width="48" height="48" title="Wounded soldiers" /><span class="image-number">{{Game.woundedSoldiers}}</span></li>
            <li class="infobar-nav-item"><img src="img/pile_quest.png" class="infobar-img" width="48" height="48" title="Adventure deck" /><span class="image-number">{{Game.questDeck.length}}</span></li>
            <li class="infobar-nav-item"><img src="img/pile_victory.png" class="infobar-img" width="48" height="48" title="Victory pile" /><span class="image-number">{{Game.victoryPile.length}}</span></li>
            <li class="infobar-nav-item"><img src="img/pile_discard.png" class="infobar-img" width="48" height="48" title="Discarded pile" /><span class="image-number">{{Game.discardPile.length}}</span></li>
        </ul>
    </div>

    <div ng-if="Gamestate.quest_list">
        <div class="flex-container">
            <button ng-click="giveUp()" class="flex-box quest-menuitem">Give Up Quest</button>
            <button ng-click="endTurn()" class="flex-box quest-menuitem">End Turn</button>
            <!-- <button ng-click="proba()" class="flex-box quest-menuitem">Test</button> -->
        </div>

        <div class="quest-treasures" ng-show="treasures.length > 0">
            <button ng-repeat="treasure in treasures" ng-click="showTreasure(treasure)" class="quest-treasure-button"><img src="img/amphora.png" width="32" height="32" />{{treasure.name}}</button>
        </div>

        <div class="quest-effects text-center" ng-show="effects.length > 0">
            <div ng-repeat="effect in effects" ng-bind-html="effect.getDesc()"></div>
        </div>

        <div class="card-container">
            <div class="card" ng-repeat="task in Game.tasks">
                <div class="card-name" ng-class="{'card-negative-head': task.isNegative, 'card-positive-head': task.isPositive}">{{task.card.name}}</div>
                <div class="card-content">
                    <img ng-src="img/lapok/{{task.card.img}}.png" width="360" height="238"/>

                    <div class="card-leveldata">
                        <div class="row" ng-repeat="levelData in task.card.levels | reverse" ng-show="levelData[0] > task.card.level">
                            <div class="ability">{{levelData[1]}}</div>
                            <div class="level">Level {{levelData[0]}}</div>
                            <div class="ability">{{levelData[2]}}</div>
                        </div>
                    </div>
                </div>
                <div class="card-stat card-ability-row">
                    <div><img src="img/sword.png" width="32" height="32" title="Difficulty" />{{task.getDifficult()}}</div>
                    <div><img src="img/star_filled.png" width="32" height="32" title="Level {{task.getLevel()}}" ng-repeat="n in [].constructor(task.getLevel()) track by $index" /></div>
                    <div><img src="img/skull.png" width="32" height="32" title="Damage" />{{task.getDamage()}}</div>
                </div>

                <div class="card-desc" ng-bind-html="task.card.desc"></div>

                <div ng-show="task.needToResolve()" class="card-commandbar">
                    <div class="row">
                        <div><button ng-click="removeSoldier(task)"> - </button></div>
                        <div><img src="img/soldier.png" width="32" height="32" />{{task.assignedSoldiers}}</div>
                        <div><button ng-click="addSoldier(task)"> + </button></div>
                        <div>+D6</div>
                    </div>            
                    <div class="row">
                        <button ng-click="resolveTask(task)">Megold</button>              
                        <button ng-show="task.hasAbility('ignore_roll')" ng-click="ignoreRoll(task)">Ignore</button>              
                        <button ng-show="task.hasAbility('sacrifice_crew')" ng-click="sacrificeCrew(task)">Sacrifice</button>              
                        <button ng-show="Game.hasTreasure('helm_of_hades')" ng-click="useTreasure('helm_of_hades', task)">Ignore</button>              
                    </div>
                </div>
                <div class="card-resultbar" ng-show="task.isResolved()">
                    <div ng-class="{'success': task.isSuccess(), 'failed': task.isFailed()}">{{Game.Util.getResult(task.result)}}</div>
                </div>

            </div>    
        </div>

    </div>
    
    <div ng-if="Gamestate.quest_result" ng-controller="TaskresultController" class="result-panel">

        <div class="card">
            <div class="card-name" ng-class="{'card-negative-head': task.isNegative, 'card-positive-head': task.isPositive}">{{task.card.name}}</div>
            <div class="card-content">
                <img ng-src="img/lapok/{{task.card.img}}.png" width="360" height="238"/>

                <div class="card-leveldata">
                    <div class="row" ng-repeat="levelData in task.card.levels | reverse" ng-show="levelData[0] > task.card.level">
                        <div class="ability">{{levelData[1]}}</div>
                        <div class="level">Level {{levelData[0]}}</div>
                        <div class="ability">{{levelData[2]}}</div>
                    </div>
                </div>
            </div>
            <div class="card-stat card-ability-row">
                <div><img src="img/sword.png" width="32" height="32" title="Difficulty" />{{task.getDifficult()}}</div>
                <div><img src="img/star_filled.png" width="32" height="32" title="Level {{task.getLevel()}}" ng-repeat="n in [].constructor(task.getLevel()) track by $index" /></div>
                <div><img src="img/skull.png" width="32" height="32" title="Damage" />{{task.getDamage()}}</div>
            </div>

            <div class="card-desc" ng-bind-html="task.card.desc"></div>

            <div class="result-panel-stat">
                <div><img src="img/soldier.png" width="40" height="40" />{{soldiers}}</div>
                <div>+</div>
                <div><img src="img/sword3.png" width="40" height="40" title="Bonus" />{{bonus}}</div>
                <div>+</div>
                <div><img src="img/dice.png" width="40" height="30" title="Roll"/>{{roll}}</div>
            </div>
            <div class="result-panel-vs">
                <div><img src="img/shield_soldier.png" width="48" height="48" title="Attack value" />{{attackValue}}</div>
                <div>VS</div>
                <div><img src="img/shield_monster.png" width="48" height="48" title="Difficult" />{{task.getDifficult()}}</div>                
            </div>
            <div class="result-panel-result">
                <div ng-show="isWin" class="success">Success</div>
                <div ng-show="isLose" class="failed">Failed<br/>
                    <img src="img/skull.png" width="32" height="32" title="Damage" /><span class="damage">{{damage}}</span></div>
            </div>
            <div class="card-commandbar">
                <div class="row"><button ng-click="close()">Close</button></div>
                <div ng-show="canReroll" class="row"><button ng-click="reroll()">Roll Again</button></div>
                <div ng-show="ignoreDamage" class="row"><button ng-click="cancelDamage()">Ignore Damage</button></div>
            </div>

        </div>    

    </div>
    
    <div ng-if="Gamestate.quest_end" ng-controller="QuestEndController" class="questend-panel">
        <h2 class="text-center">{{endText}}</h2>
        <div class="questend-panel-row text-center">You have gained {{xp}} heroic deed(s)!</div>
        <div class="questend-panel-row text-center"><button ng-click="close()">Go to Iolcus</button></div>
        <div ng-if="isWin">
            <h3 class="text-center">Defeated cards</h3>
            <div ng-show="hasOrpheuslyre" class="questend-panel-orpheus"><b>Orpheus' lyre</b>: stop a monster from leveling up at the end of quest<br/>
                Choose a card!
            </div>

            <div class="card-container">
                <div class="card" ng-repeat="card in defeatedCards">
                    <div ng-show="!hasOrpheuslyre">
                        <div class="card-name" ng-class="{'card-negative-head': card.isNegative(), 'card-positive-head': card.isPositive()}">
                            {{card.name}}
                        </div>
                    </div>
                    <div ng-show="hasOrpheuslyre">
                        <div class="card-name" ng-class="{'card-negative-head': card.isNegative(), 'card-positive-head': card.isPositive()}">
                            <label class="orpheus-container">
                                {{card.name}}<input type="radio" ng-value="card" ng-model="selection.card" /><span class="orpheus-checkmark"></span>
                            </label>
                        </div>
                    </div>
                    <div class="card-content">
                        <img ng-src="img/lapok/{{card.img}}.png" width="360" height="238"/>
    
                        <div class="card-leveldata">
                            <div class="row" ng-repeat="levelData in card.levels | reverse" ng-show="levelData[0] > card.level">
                                <div class="ability">{{levelData[1]}}</div>
                                <div class="level">Level {{levelData[0]}}</div>
                                <div class="ability">{{levelData[2]}}</div>
                            </div>
                        </div>
                    </div>
                    <div class="card-stat card-ability-row">
                        <div><img src="img/sword.png" width="32" height="32" title="Difficulty" />{{card.difficult}}</div>
                        <div><img src="img/star_filled.png" width="32" height="32" title="Level {{card.level}}" ng-repeat="n in [].constructor(card.level) track by $index" /></div>
                        <div><img src="img/skull.png" width="32" height="32" title="Damage" />{{card.damage}}</div>
                    </div>
    
                    <div class="card-desc" ng-bind-html="card.desc"></div>
                </div>    
            </div>
        
        </div>
    </div>
    
</div>

<div ng-if="Gamestate._messageBox" ng-controller="MessageBoxController" class="messagebox">
    <div class="messagebox-content">
        <p><b>{{title}}</b></p>
        <p ng-bind-html="content"></p>
        <p>
            <button ng-click="handleButton(1)">{{buttonLabel1}}</button>
            <button ng-if="button2Visible" ng-click="handleButton(2)">{{buttonLabel2}}</button>
            <button ng-if="button3Visible" ng-click="handleButton(3)">{{buttonLabel3}}</button>
        </p>
    </div>
</div>

</div> <!-- ngCloak-->

<script type="text/javascript" src="lib/angular.js"></script>
<script type="text/javascript" src="lib/angular-sanitize.min.js"></script> 

<script src="js/utils.js"></script>
<script src="js/game.js"></script>
<script src="js/statemanager.js"></script>
<script src="js/gamedata.js"></script>
<script src="js/app.js"></script>
<script src="js/preloader.js"></script>
</body>
</html>
